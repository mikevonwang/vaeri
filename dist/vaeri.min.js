"use strict";var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Vaeri=function(){function e(){_classCallCheck(this,e),this.state={},this.dom={},this.start()}return _createClass(e,[{key:"start",value:function(){var e=this;document.addEventListener("DOMContentLoaded",function(){e.getDOM&&(e.dom=e.processDOM(e.getDOM(),document)),e.setListeners&&e.processListeners(e.setListeners(),e.dom),e.onMount&&e.onMount()})}},{key:"processDOM",value:function(e,t){var r=this,n={};return Object.keys(e).forEach(function(i){var s=t.vaeri_ref?t.vaeri_ref:document,a=e[i][0],o=e[i][1];if("string"==typeof a){var c=(t.vaeri_selector?t.vaeri_selector+" ":"")+a;n[i]=new VaeriElement(r,s,c),o&&Object.assign(n[i],r.processDOM(o,n[i]))}else{var l=(t.vaeri_selector?t.vaeri_selector+" ":"")+a[0];n[i]=new VaeriElementArray(r,s,l),o&&n[i].forEach(function(e){Object.assign(e,r.processDOM(o,e))})}}),n}},{key:"processListeners",value:function(e,t){var r=this;Object.keys(e).forEach(function(n){var i=e[n][0],s=e[n][1];null!==i&&i.length>0&&(t.length>0?t.forEach(function(e){e[n].listen(i)}):t[n]&&t[n].listen(i)),s&&r.processListeners(s,t[n])})}},{key:"doAction",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(this.state=Object.assign({},this.state,t),this[e]){var n;(n=this[e]).call.apply(n,[this].concat(_toConsumableArray(r)))}}}]),e}();function VaeriElement(e,t,r,n){this.vaeri_ref=n||t.querySelector(r),this.vaeri_selector=r,this.listen=function(t,r){var n=this;t.forEach(function(t){n.vaeri_ref.addEventListener(t[0],function(i){t[1].call(e,i,n.vaeri_ref,r)})})},this.classList=this.vaeri_ref.classList,this.getAttribute=this.vaeri_ref.getAttribute,this.setAttribute=this.vaeri_ref.setAttribute,this.insertAdjacentHTML=this.vaeri_ref.insertAdjacentHTML.bind(this.vaeri_ref)}function VaeriElementArray(e,t,r){var n=this;t.querySelectorAll(r).forEach(function(t){null===t.getAttribute("vaeri-template")?n.push(new VaeriElement(e,null,r,t)):(n.template=t,n.parent=t.parentNode,t.remove())}),this.listen=function(e){this.listeners=e,this.forEach(function(t,r){t.listen(e,r)})},this.populate=function(t,n){var i=this;t.forEach(function(t,s){var a=i.template.cloneNode(!0),o=new VaeriElement(e,null,r,a);i.parent.appendChild(a),i.push(o),o.listen(i.listeners,s),n.call(e,t,s)})}}VaeriElementArray.prototype=Array.prototype;
//# sourceMappingURL=vaeri.min.js.map

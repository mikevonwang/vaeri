"use strict";var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Vaeri=function(){function e(){_classCallCheck(this,e),this.state={},this.dom={},this.start()}return _createClass(e,[{key:"start",value:function(){var e=this;document.addEventListener("DOMContentLoaded",function(){e.getDOM&&(e.dom=e.processDOM(e.getDOM(),document),document.querySelectorAll("*[vaeri-template=true]").forEach(function(e){e.remove()})),e.setListeners&&e.processListeners(e.setListeners(),e.dom),e.onMount&&e.onMount()})}},{key:"processDOM",value:function(e,t,r){var n=this,i={};return Object.keys(e).forEach(function(a){var s=t.vaeri_ref?t.vaeri_ref:document,l=e[a][0],c=e[a][1];if("string"==typeof l){var o=(t.vaeri_selector?t.vaeri_selector+" ":"")+l;i[a]=new VaeriElement(n,s,o,null,r),c&&Object.assign(i[a],n.processDOM(c,i[a]),{vaeri_children:Object.keys(c)})}else{var u=(t.vaeri_selector?t.vaeri_selector+" ":"")+l[0];i[a]=new VaeriElementArray(n,s,u),c&&(i[a].forEach(function(e){Object.assign(e,n.processDOM(c,e),{vaeri_children:Object.keys(c)})}),i[a].template&&Object.assign(i[a].template,n.processDOM(c,i[a].template,!0),{vaeri_children:Object.keys(c)}))}}),i}},{key:"processListeners",value:function(e,t,r){var n=this;Object.keys(e).forEach(function(i){var a=e[i][0],s=e[i][1];null!==a&&a.length>0&&(t.length>0?t.forEach(function(e){e[i].listen(a)}):t[i]&&(t[i].listen(a),r&&(t[i].listeners=a))),s&&(n.processListeners(s,t[i]),t[i].template&&n.processListeners(s,t[i].template,!0))})}},{key:"doAction",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(this.state=Object.assign({},this.state,t),this[e]){var n;(n=this[e]).call.apply(n,[this].concat(_toConsumableArray(r)))}}}]),e}(),VaeriElement=function(){function e(t,r,n,i,a){_classCallCheck(this,e),this.vaeri_self=t,this.vaeri_ref=i||r.querySelector(n),this.vaeri_selector=n,this.classList=this.vaeri_ref.classList,this.getAttribute=this.vaeri_ref.getAttribute,this.setAttribute=this.vaeri_ref.setAttribute,this.insertAdjacentHTML=this.vaeri_ref.insertAdjacentHTML.bind(this.vaeri_ref),a&&this.vaeri_ref.remove()}return _createClass(e,[{key:"listen",value:function(e,t){var r=this;e.forEach(function(e){r.vaeri_ref.addEventListener(e[0],function(n){e[1].call(r.vaeri_self,n,r.vaeri_ref,t)})})}},{key:"value",get:function(){return this.vaeri_ref.value},set:function(e){this.vaeri_ref.value=e}}]),e}();function VaeriElementArray(e,t,r){var n=this;t.querySelectorAll(r).forEach(function(t){null===t.getAttribute("vaeri-template")?n.push(new VaeriElement(e,null,r,t)):(n.template=new VaeriElement(e,null,r,t),n.parent=t.parentNode)}),this.listen=function(e){this.listeners=e,this.forEach(function(t,r){t.listen(e,r)})},this.populate=function(t,r){var n=this;void 0===t.length&&(t=[t]),t.forEach(function(t){var i=n.length,a=n.clone(n.template,i);a.listen(n.listeners,i),n.parent.appendChild(a.vaeri_ref),n.push(a),r.call(e,t,i)})},this.clone=function(t,r){var n=this,i=new VaeriElement(e,null,t.vaeri_selector,t.vaeri_ref.cloneNode(!0));return t.vaeri_children&&t.vaeri_children.forEach(function(e){i[e]=n.clone(t[e],r),i.vaeri_ref.appendChild(i[e].vaeri_ref)}),t.listeners&&i.listen(t.listeners,r),i}}VaeriElementArray.prototype=Array.prototype;
//# sourceMappingURL=vaeri.min.js.map

{"version":3,"sources":["vaeri.js"],"names":["Vaeri","_classCallCheck","this","state","dom","start","_this","addEventListener","getDOM","user_dom","mapped_dom","Object","keys","forEach","c","document","querySelector","VaeriElementArray","querySelectorAll","setListeners","undefined","l","bind","listeners","d","i","onMount","action_name","state_updates","action_parameters","arguments","length","assign","_action_name","call","apply","concat","_toConsumableArray","self","key","selector","elements","_this2","push","bound_listeners","listen","x","map","populate","cur_length","j","delete","deleting_index","splice","Array","prototype"],"mappings":"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","file":"vaeri.min.js","sourcesContent":["class Vaeri {\n  constructor() {\n    this.state = {};\n    this.dom = {};\n    this.start();\n  }\n\n  start() {\n    document.addEventListener('DOMContentLoaded', () => {\n\n      if (this.getDOM) {\n        const user_dom = this.getDOM();\n        const mapped_dom = {};\n        Object.keys(user_dom).forEach((c) => {\n          if (typeof user_dom[c] === 'string') {\n            mapped_dom[c] = document.querySelector(user_dom[c]);\n          }\n          else {\n            mapped_dom[c] = new VaeriElementArray(this, c, user_dom[c], document.querySelectorAll(user_dom[c]));\n          }\n        });\n        this.dom = mapped_dom;\n      }\n\n      if (this.setListeners) {\n        const listeners = this.setListeners();\n        Object.keys(listeners).forEach((c) => {\n          if (this.dom[c]) {\n            if (this.dom[c].length === undefined) {\n              listeners[c].forEach((l) => {\n                this.dom[c].addEventListener(l[0], l[1].bind(this,this.dom[c],undefined));\n              });\n            }\n            else {\n              this.dom[c].listen(listeners[c]);\n              this.dom[c].forEach((d,i) => {\n                listeners[c].forEach((l) => {\n                  d.addEventListener(l[0], l[1].bind(this,d,i));\n                });\n              });\n            }\n          }\n        });\n      }\n\n      if (this.onMount) {\n        this.onMount();\n      }\n\n    });\n  }\n\n  doAction(action_name, state_updates, action_parameters = []) {\n    this.state = Object.assign({}, this.state, state_updates);\n    if (this[action_name]) {\n      this[action_name].call(this, ...action_parameters);\n    }\n  }\n\n}\n\nfunction VaeriElementArray(self, key, selector, elements) {\n  elements.forEach((c) => {\n    this.push(c);\n  });\n  this.key = key;\n  this.selector = selector;\n  this.listeners = null;\n  this.bound_listeners = null;\n\n  this.listen = (x) => {\n    this.listeners = x;\n    this.bound_listeners = this.listeners.map((c) => {\n      return ([]);\n    });\n  };\n\n  this.populate = () => {\n    let cur_length = this.length;\n    document.querySelectorAll(this.selector).forEach((c,i) => {\n      if (i >= cur_length) {\n        this.push(c);\n        if (this.listeners) {\n          this.bound_listeners[i] = [];\n          this.listeners.forEach((l,j) => {\n            this.bound_listeners[i][j] = l[1].bind(self,c,i);\n            c.addEventListener(l[0], this.bound_listeners[i][j]);\n          });\n        }\n      }\n    });\n  };\n\n  this.delete = (deleting_index) => {\n    this.forEach((c,i) => {\n      if (this.listeners) {\n        this.listeners.forEach((l,j) => {\n          c.removeEventListener(l[0], this.bound_listeners[i][j]);\n        });\n      }\n    });\n    this.splice(deleting_index, 1);\n    if (this.listeners) {\n      this.bound_listeners.splice(deleting_index, 1);\n    }\n    this.forEach((c,i) => {\n      if (this.listeners) {\n        this.listeners.forEach((l,j) => {\n          this.bound_listeners[i][j] = l[1].bind(self,c,i);\n          c.addEventListener(l[0], this.bound_listeners[i][j]);\n        });\n      }\n    });\n  };\n}\nVaeriElementArray.prototype = Array.prototype;\n"]}
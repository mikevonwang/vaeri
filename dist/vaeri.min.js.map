{"version":3,"sources":["vaeri.js"],"names":["Vaeri","_classCallCheck","this","state","dom","start","_this","addEventListener","getDOM","processDOM","document","setListeners","listeners","Object","keys","forEach","c","undefined","length","l","e","call","listen","d","i","onMount","element_list","parent","_this2","key","context","vaeri_ref","selector","children","selector_full","vaeri_selector","VaeriElement","assign","VaeriElementArray","action_name","state_updates","action_parameters","arguments","_action_name","apply","concat","_toConsumableArray","self","classList","getAttribute","setAttribute","_this3","querySelectorAll","push","prototype","Array"],"mappings":"0gBAAMA,iBACJ,SAAAA,IAAcC,gBAAAC,KAAAF,GACZE,KAAKC,SACLD,KAAKE,OACLF,KAAKG,6DAGC,IAAAC,EAAAJ,KAPJF,SAQOO,iBAAiB,mBAAoB,WAJ9C,GAHYD,EAAAE,SAURF,EAAKF,IAAME,EAAKG,WAAWH,EAAKE,SAAUE,WAPzCL,EAALM,aAAA,CACD,IAAAC,EAAAN,EAAAK,eAWKE,OAAOC,KAAKF,GAAWG,QAAQ,SAACC,GAC1BV,EAAKF,IAAIY,UACgBC,IAAvBX,EAAKF,IAAIY,GAAGE,OACdN,EAAUI,GAAGD,QAZjB,SAAAI,GAAAb,EAAAF,IAAAY,GAAAT,iBAAAY,EAAA,GAAA,SAAAC,GAcQD,EAAE,GAAGE,KAALf,EAAgBc,EAAGd,EAAKF,IAAIY,QAAIC,QAT3CX,EAAAF,IAAAY,GAAAM,OAAAV,EAAAI,IAeOV,EAAKF,IAAIY,GAAGD,QAAQ,SAACQ,EAAEC,GAb3BZ,EAAKD,GAAAA,QAAc,SAAAQ,GACfP,EAAAA,iBAAiBD,EAAAA,GAAAA,SAALS,GACXN,EAAKF,GAAAA,KAALE,EAAgBC,EAAAA,EAAQS,aAUzBlB,EAAAmB,SACAnB,EAAAmB,+CAMCC,EANDC,GAAA,IAAAC,EAAA1B,KAODE,KAsBL,OArBGS,OAAAC,KAAAY,GAAAX,QAAA,SAAAc,GACF,IApBDC,EAAAH,EAAAI,UAAAJ,EAAAI,UAAArB,SAqBDsB,EAAAN,EAAAG,GAAA,GAcKI,EAAWP,EAAaG,GAAK,GAXjC,GAAA,iBAAKJ,EAAL,CACD,IAAAS,GAAAP,EAAAQ,eAAAR,EAAAQ,eAAA,IAAA,IAAAH,EAjCH5B,EAAAyB,GAAA,IAAAO,aAAAR,EAAAE,EAAAI,GAoCDD,GAaOpB,OAAOwB,OAAOjC,EAAIyB,GAAMD,EAAKnB,WAAWwB,EAAU7B,EAAIyB,SAX7B,CAe3B,IAAMK,GAAkBP,EAAOQ,eAAmBR,EAAOQ,eAAiB,IAAO,IAAMH,EAAS,GAdpG5B,EAAIA,GAAJ,IAAAkC,kBAAAV,EAAAE,EAAAI,GACArB,GACET,EAAM0B,GAAAA,QAAWH,SAAAA,GACXK,OAAAA,OAAWN,EAAAA,EAAAA,WAAjBO,EAAAjB,SAMEZ,mCAHFmC,EAOKC,GAAA,IAAAC,EAAAC,UAAAxB,OAAA,QAAAD,IAAAyB,UAAA,GAAAA,UAAA,MAEHtC,GADAF,KAAAC,MAAM+B,OAAAA,UAAkBP,KAAOQ,MAAAA,GAC/B/B,KAAAA,GAAekC,CAAAA,IAAAA,GACfK,EAAAzC,KAAAqC,IAAclB,KAAduB,MAAAD,GAAczC,MAAd2C,OAAAC,mBAAcL,eAOjB,SAtBDL,aAAAW,EAAAjB,EAAAE,EAAAD,GAwBD7B,KAAA6B,UADCA,GAiBiBD,EAdVS,cAAaC,GAgBtBtC,KAAKiC,eAAiBH,EAdpB9B,KAAAK,iBAAIL,KAAmB6B,UAAAxB,iBAAAL,KAAA8C,UAAA9C,KAAA6B,UAAAiB,UAkBzB9C,KAAK+C,aAAe/C,KAAK6B,UAAUkB,aAjB/B/C,KAAAgD,aAAAhD,KAAA6B,UAAKQ,aAqBX,SAASD,kBAAkBS,EAAMjB,EAASE,GAAU,IAAAmB,EAAAjD,KACjC4B,EAAQsB,iBAAiBpB,GACjCjB,QAAQ,SAACC,GAChBmC,EAAKE,KAAK,IAAIjB,aAAaW,EAAM,KAAMf,EAAUhB,MAjBnDsB,kBAAegB,UAAAC,MAAAD","file":"vaeri.min.js","sourcesContent":["class Vaeri {\n  constructor() {\n    this.state = {};\n    this.dom = {};\n    this.start();\n  }\n\n  start() {\n    document.addEventListener('DOMContentLoaded', () => {\n\n      if (this.getDOM) {\n        this.dom = this.processDOM(this.getDOM(), document);\n      }\n\n      if (this.setListeners) {\n        const listeners = this.setListeners();\n        Object.keys(listeners).forEach((c) => {\n          if (this.dom[c]) {\n            if (this.dom[c].length === undefined) {\n              listeners[c].forEach((l) => {\n                this.dom[c].addEventListener(l[0], (e) => {\n                  l[1].call(this, e, this.dom[c], undefined);\n                });\n              });\n            }\n            else {\n              this.dom[c].listen(listeners[c]);\n              this.dom[c].forEach((d,i) => {\n                listeners[c].forEach((l) => {\n                  d.addEventListener(l[0], (e) => {\n                    l[1].call(this, e, d, i)\n                  });\n                });\n              });\n            }\n          }\n        });\n      }\n\n      if (this.onMount) {\n        this.onMount();\n      }\n\n    });\n  }\n\n  processDOM(element_list, parent) {\n    let dom = {};\n    Object.keys(element_list).forEach((key) => {\n      const context = (parent.vaeri_ref) ? parent.vaeri_ref : document;\n      const selector = element_list[key][0];\n      const children = element_list[key][1];\n\n      if (typeof selector === 'string') {\n        const selector_full = ((parent.vaeri_selector) ? (parent.vaeri_selector + ' ') : '') + selector;\n        dom[key] = new VaeriElement(this, context, selector_full);\n        if (children) {\n          Object.assign(dom[key], this.processDOM(children, dom[key]));\n        }\n      }\n      else {\n        const selector_full = ((parent.vaeri_selector) ? (parent.vaeri_selector + ' ') : '') + selector[0];\n        dom[key] = new VaeriElementArray(this, context, selector_full);\n        if (children) {\n          dom[key].forEach((c) => {\n            Object.assign(c, this.processDOM(children, c));\n          });\n        }\n      }\n\n    });\n    return dom;\n  }\n\n  doAction(action_name, state_updates, action_parameters = []) {\n    this.state = Object.assign({}, this.state, state_updates);\n    if (this[action_name]) {\n      this[action_name].call(this, ...action_parameters);\n    }\n  }\n\n}\n\nfunction VaeriElement(self, context, selector, vaeri_ref) {\n  if (vaeri_ref) {\n    this.vaeri_ref = vaeri_ref;\n  }\n  else {\n    this.vaeri_ref = context.querySelector(selector);\n  }\n  this.vaeri_selector = selector;\n\n  this.addEventListener = this.vaeri_ref.addEventListener;\n  this.classList = this.vaeri_ref.classList;\n  this.getAttribute = this.vaeri_ref.getAttribute;\n  this.setAttribute = this.vaeri_ref.setAttribute;\n}\n\nfunction VaeriElementArray(self, context, selector) {\n  const elements = context.querySelectorAll(selector);\n  elements.forEach((c) => {\n    this.push(new VaeriElement(self, null, selector, c));\n  });\n}\nVaeriElementArray.prototype = Array.prototype;\n"]}
{"version":3,"sources":["vaeri.js"],"names":["Vaeri","_classCallCheck","this","state","dom","_this","document","addEventListener","getDOM","user_dom","mapped_dom","Object","keys","forEach","c","querySelector","VaeriElementArray","querySelectorAll","setListeners","listeners","undefined","length","l","bind","listen","d","i","onMount","action_name","new_state_items","new_state","assign","self","_this2","elements","push","key","selector","bound_listeners","x","map","populate","j","deleting_index","removeEventListener","splice","delete","prototype"],"mappings":"iYAAMA,iBACJ,SAAAA,IAAcC,gBAAAC,KAAAF,GACZE,KAAKC,SACLD,KAAKE,4DAGC,IAAAC,EAAAH,KALRI,SAAAC,iBAAc,mBAAA,WAQV,GAAIF,EAAKG,OAAQ,CAPnB,IAAAC,EAAAJ,EAAAG,SACAE,KACDC,OAAAC,KAAAH,GAAAI,QAAA,SAAAC,GASkC,iBAAhBL,EAASK,GAClBJ,EAAWI,GAAKR,SAASS,cAAcN,EAASK,IARlDJ,EAAAI,GAAA,IAAAE,kBAAAX,EAAAS,EAAAL,EAAAK,GAAAR,SAAAW,iBAAAR,EAAAK,OAcFT,EAAKD,IAAMM,EATX,GAAAL,EAAMK,aAAN,CACAC,IAAAA,EAAYF,EAAZS,eACEP,OAAAC,KAAIO,GAAOV,QAAgB,SAAAK,GACzBJ,EAAAA,IAAAA,UAEGU,IAHLf,EAGKD,IAAAU,GAAAO,OACHX,EAAAA,GAAAG,QAAoBG,SAAAA,GACrBX,EAAAD,IAAAU,GAAAP,iBAAAe,EAAA,GAAAA,EAAA,GAAAC,KAAAlB,EAAAA,EAAAD,IAAAU,QAAAM,OAeGf,EAAKD,IAAIU,GAAGU,OAAOL,EAAUL,IAVjCT,EAAKa,IAAAA,GAAAA,QAAc,SAAAO,EAAAC,GACfP,EAAYL,GAAAD,QAAKK,SAAAA,GAChBN,EAAAA,iBAAgBC,EAAAA,GAAQS,EAAA,GAAAC,KAAAlB,EAAOoB,EAAAC,YAShCrB,EAAAsB,SACER,EAAAA,6CAVRS,EAAAC,GAiBD,IAAAC,EAAAnB,OAAAoB,UAAA7B,KAAAC,MAAA0B,GAWC3B,KAAK0B,IATP1B,KAAA0B,GAASD,KAASzB,KAAAA,KAAAC,MAAA2B,GAEjB5B,KAAAC,MAAA2B,WAeP,SAASd,kBAAkBgB,EAVhBJ,EAAAA,EAAaC,GAUkC,IAAAI,EAAA/B,KATtDgC,EAAMJ,QAAAA,SAAAA,GACNG,EAAAE,KAAIrB,KAEHZ,KAAAkC,IAAAA,EACDlC,KAAAmC,SAAAA,EACDnC,KAAAiB,UAAA,KAWDjB,KAAKoC,gBAAkB,KAEvBpC,KAAKsB,OAAS,SAACe,GACbN,EAAKd,UAAYoB,EACjBN,EAAKK,gBAAkBL,EAAKd,UAAUqB,IAAI,SAAC1B,GAX/C,YAEIZ,KAAAuC,SAAA,WADFR,EAAAZ,OAAA,EAGAf,SAAW8B,iBAAXH,EAAAI,UAAAxB,QAAA,SAAAC,EAAAY,GACAO,EAAKI,KAALvB,GACKK,EAAAA,YACAmB,EAAAA,gBAALZ,MAeMO,EAAKd,UAAUN,QAAQ,SAACS,EAAEoB,GAb3BlB,EAALc,gBAAqBZ,GAAAgB,GAAApB,EAAA,GAAAC,KAAAS,EAAAlB,EAAAY,GACnBZ,EAAKK,iBAALG,EAAA,GAAAW,EAAAK,gBAAAZ,GAAAgB,UAMFxC,KAAKuC,OAAL,SAAAE,GACEV,EAAApB,QAAA,SAAAC,EAAcY,GACdpB,EAASW,WACPgB,EAAKE,UAALtB,QAAA,SAAAS,EAAAoB,GACI5B,EAAA8B,oBAAgBtB,EAAA,GAAAW,EAAAK,gBAAAZ,GAAAgB,QAIhB5B,EAAAA,OAAEP,EAAiB,GACpB0B,EAHDd,WAIDc,EAAAK,gBAAAO,OAAAF,EAAA,GAVLV,EAAApB,QAAA,SAAAC,EAAAY,GA2BQO,EAAKd,WAbR2B,EAAL3B,UAAcN,QAAC8B,SAAAA,EAAAA,GACbV,EAAKpB,gBAAQa,GAAAgB,GAASpB,EAAA,GAAAC,KAAAS,EAAAlB,EAAAY,GAChBZ,EAAAP,iBAAgBe,EAAA,GAAAW,EAAAK,gBAAAZ,GAAAgB,SAMtB1B,kBAAY2B,UAAAA,MAAZI","file":"vaeri.min.js","sourcesContent":["class Vaeri {\n  constructor() {\n    this.state = {};\n    this.dom = {};\n  }\n\n  start() {\n    document.addEventListener('DOMContentLoaded', () => {\n\n      if (this.getDOM) {\n        const user_dom = this.getDOM();\n        const mapped_dom = {};\n        Object.keys(user_dom).forEach((c) => {\n          if (typeof user_dom[c] === 'string') {\n            mapped_dom[c] = document.querySelector(user_dom[c]);\n          }\n          else {\n            mapped_dom[c] = new VaeriElementArray(this, c, user_dom[c], document.querySelectorAll(user_dom[c]));\n          }\n        });\n        this.dom = mapped_dom;\n      }\n\n      if (this.setListeners) {\n        const listeners = this.setListeners();\n        Object.keys(listeners).forEach((c) => {\n          if (this.dom[c]) {\n            if (this.dom[c].length === undefined) {\n              listeners[c].forEach((l) => {\n                this.dom[c].addEventListener(l[0], l[1].bind(this,this.dom[c],undefined));\n              });\n            }\n            else {\n              this.dom[c].listen(listeners[c]);\n              this.dom[c].forEach((d,i) => {\n                listeners[c].forEach((l) => {\n                  d.addEventListener(l[0], l[1].bind(this,d,i));\n                });\n              });\n            }\n          }\n        });\n      }\n\n      if (this.onMount) {\n        this.onMount();\n      }\n\n    });\n  }\n\n  doAction(action_name, new_state_items) {\n    const new_state = Object.assign({}, this.state, new_state_items);\n    if (this[action_name]) {\n      this[action_name].call(this, this.state, new_state);\n    }\n    this.state = new_state;\n  }\n\n}\n\nfunction VaeriElementArray(self, key, selector, elements) {\n  elements.forEach((c) => {\n    this.push(c);\n  });\n  this.key = key;\n  this.selector = selector;\n  this.listeners = null;\n  this.bound_listeners = null;\n\n  this.listen = (x) => {\n    this.listeners = x;\n    this.bound_listeners = this.listeners.map((c) => {\n      return ([]);\n    });\n  };\n\n  this.populate = () => {\n    this.length = 0;\n    document.querySelectorAll(this.selector).forEach((c,i) => {\n      this.push(c);\n      if (this.listeners) {\n        this.bound_listeners[i] = [];\n        this.listeners.forEach((l,j) => {\n          this.bound_listeners[i][j] = l[1].bind(self,c,i);\n          c.addEventListener(l[0], this.bound_listeners[i][j]);\n        });\n      }\n    });\n  };\n\n  this.delete = (deleting_index) => {\n    this.forEach((c,i) => {\n      if (this.listeners) {\n        this.listeners.forEach((l,j) => {\n          c.removeEventListener(l[0], this.bound_listeners[i][j]);\n        });\n      }\n    });\n    this.splice(deleting_index, 1);\n    if (this.listeners) {\n      this.bound_listeners.splice(deleting_index, 1);\n    }\n    this.forEach((c,i) => {\n      if (this.listeners) {\n        this.listeners.forEach((l,j) => {\n          this.bound_listeners[i][j] = l[1].bind(self,c,i);\n          c.addEventListener(l[0], this.bound_listeners[i][j]);\n        });\n      }\n    });\n  };\n}\nVaeriElementArray.prototype = Array.prototype;\n"]}
{"version":3,"sources":["vaeri.js"],"names":["Vaeri","_classCallCheck","this","state","dom","start","_this","addEventListener","getDOM","user_dom","mapped_dom","Object","keys","forEach","c","document","querySelector","VaeriElementArray","querySelectorAll","setListeners","undefined","l","e","listen","listeners","d","i","call","onMount","action_name","state_updates","action_parameters","arguments","length","assign","_action_name","apply","concat","_toConsumableArray","self","key","selector","elements","_this2","push","bound_listeners","x","map","populate","cur_length","j","delete","deleting_index","splice","removeEventListener","prototype"],"mappings":"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","file":"vaeri.min.js","sourcesContent":["class Vaeri {\n  constructor() {\n    this.state = {};\n    this.dom = {};\n    this.start();\n  }\n\n  start() {\n    document.addEventListener('DOMContentLoaded', () => {\n\n      if (this.getDOM) {\n        const user_dom = this.getDOM();\n        const mapped_dom = {};\n        Object.keys(user_dom).forEach((c) => {\n          if (typeof user_dom[c] === 'string') {\n            mapped_dom[c] = document.querySelector(user_dom[c]);\n          }\n          else {\n            mapped_dom[c] = new VaeriElementArray(this, c, user_dom[c], document.querySelectorAll(user_dom[c]));\n          }\n        });\n        this.dom = mapped_dom;\n      }\n\n      if (this.setListeners) {\n        const listeners = this.setListeners();\n        Object.keys(listeners).forEach((c) => {\n          if (this.dom[c]) {\n            if (this.dom[c].length === undefined) {\n              listeners[c].forEach((l) => {\n                this.dom[c].addEventListener(l[0], (e) => {\n                  l[1].call(this, e, this.dom[c], undefined);\n                });\n              });\n            }\n            else {\n              this.dom[c].listen(listeners[c]);\n              this.dom[c].forEach((d,i) => {\n                listeners[c].forEach((l) => {\n                  d.addEventListener(l[0], (e) => {\n                    l[1].call(this, e, d, i)\n                  });\n                });\n              });\n            }\n          }\n        });\n      }\n\n      if (this.onMount) {\n        this.onMount();\n      }\n\n    });\n  }\n\n  doAction(action_name, state_updates, action_parameters = []) {\n    this.state = Object.assign({}, this.state, state_updates);\n    if (this[action_name]) {\n      this[action_name].call(this, ...action_parameters);\n    }\n  }\n\n}\n\nfunction VaeriElementArray(self, key, selector, elements) {\n  elements.forEach((c) => {\n    this.push(c);\n  });\n  this.key = key;\n  this.selector = selector;\n  this.listeners = null;\n  this.bound_listeners = null;\n\n  this.listen = (x) => {\n    this.listeners = x;\n    this.bound_listeners = this.listeners.map((c) => {\n      return ([]);\n    });\n  };\n\n  this.populate = () => {\n    let cur_length = this.length;\n    document.querySelectorAll(this.selector).forEach((c,i) => {\n      if (i >= cur_length) {\n        this.push(c);\n        if (this.listeners) {\n          this.bound_listeners[i] = [];\n          this.listeners.forEach((l,j) => {\n            this.bound_listeners[i][j] = (e) => {\n              l[1].call(self, e, c, i);\n            };\n            c.addEventListener(l[0], this.bound_listeners[i][j]);\n          });\n        }\n      }\n    });\n  };\n\n  this.delete = (deleting_index) => {\n    this.forEach((c,i) => {\n      if (this.listeners) {\n        this.listeners.forEach((l,j) => {\n          c.removeEventListener(l[0], this.bound_listeners[i][j]);\n        });\n      }\n    });\n    this.splice(deleting_index, 1);\n    if (this.listeners) {\n      this.bound_listeners.splice(deleting_index, 1);\n    }\n    this.forEach((c,i) => {\n      if (this.listeners) {\n        this.listeners.forEach((l,j) => {\n          this.bound_listeners[i][j] = (e) => {\n            l[1].call(self, e, c, i);\n          };\n          c.addEventListener(l[0], this.bound_listeners[i][j]);\n        });\n      }\n    });\n  };\n}\nVaeriElementArray.prototype = Array.prototype;\n"]}